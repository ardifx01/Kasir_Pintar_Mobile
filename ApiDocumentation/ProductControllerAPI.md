
# ProductController API Documentation

## Endpoints

### 1. Get All Products
**URL:** `/products`  
**Method:** `GET`  
**Description:** Fetch all products for the authenticated user.  
**Authorization:** Requires `viewAny` permission.  

---

### 2. Get Products by Store
**URL:** `/products/store/{storeId}`  
**Method:** `GET`  
**Description:** Fetch all products for a specific store.  
**Authorization:** Requires `viewAny` permission. Non-admins can only access their own store's products.  

---

### 3. Create Product
**URL:** `/products`  
**Method:** `POST`  
**Description:** Create a new product.  
**Authorization:** Requires `create` permission.  
**Validation Rules:**  
- `name_product`: Required, string, max: 255.  
- `code_product`: Required, string, unique.  
- `selling_price`: Required, numeric, min: 0.  
- `purchase_price`: Required, numeric, min: 0.  
- `stock`: Required, integer, min: 0.  
- `unit`: Required, string.  
- `image`: Optional, image (jpeg, png, jpg, gif), max: 2048 KB.  
- `store_id`: Required, must exist in `stores` table.  
- `category_product_id`: Required, must exist in `category_products` table.  

---

### 4. Get Product Details
**URL:** `/products/{product}`  
**Method:** `GET`  
**Description:** Fetch details of a specific product.  
**Authorization:** Requires `view` permission.  

---

### 5. Update Product
**URL:** `/products/{product}`  
**Method:** `PUT`  
**Description:** Update a specific product.  
**Authorization:** Requires `update` permission.  
**Validation Rules:** Same as **Create Product**, but fields are optional.  

---

### 6. Update Product Image
**URL:** `/products/{product}/image`  
**Method:** `POST`  
**Description:** Update the image of a specific product.  
**Authorization:** Requires `update` permission.  
**Validation Rules:**  
- `image`: Required, image (jpeg, png, jpg, gif), max: 2048 KB.  

---

### 7. Delete Product
**URL:** `/products/{product}`  
**Method:** `DELETE`  
**Description:** Delete a specific product.  
**Authorization:** Requires `delete` permission.  

---

### 8. Get All Category Products
**URL:** `/products/categories`  
**Method:** `GET`  
**Description:** Fetch all product categories.  
**Authorization:** Requires admin privileges.  

## Error Responses
- **403 Unauthorized:** User lacks required permission.  
- **422 Validation Errors:** Invalid request data.  
- **500 Server Error:** An unexpected error occurred.  

---

**Generated by:** AI
